# Cyber Owl TTS Module

–ú–æ–¥—É–ª—å –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–∏–±–µ—Ä—Å–æ–≤—ã.
–í—ã–Ω–µ—Å–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ Silero TTS.


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
$pip install .
--- –∏–ª–∏ ---
$pip install -e .

## –ó–∞–ø—É—Å–∫
$python -m main

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env` –ø–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é .env_example

### –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –ø–∞–ø–∫–µ venv.
$python -m venv venv

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è
- win:
./venv/Scripts/activate.bat
- linux:
$source venv/bin/activate

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) 
## –î–ª—è —Ä–∞–±–æ—Ç—ã —Å pytorch –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é python 3.8, –∞ —Ç–∞–∫–∂–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è CUDA 
$pip install -r requirements.txt

## –¢–µ–ø–µ—Ä—å –∫–∞—á–∞–µ–º –º–æ–¥–µ–ª—å
# –î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞:
wget https://models.silero.ai/models/tts/ru/v4_ru.pt -O silero_model_ru.pt

# –ò–ª–∏ –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ:
wget https://models.silero.ai/models/tts/en/v3_en.pt -O silero_model_en.pt

# –°–∫–∞—á–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –ø–æ–ª–æ–∂–∏—Ç—å –≤ –ø–∞–ø–∫—É models

---

### –ü—Ä–∏–º–µ—Ä—ã GET –∏ POST –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ FastAPI-—Å–µ—Ä–≤–µ—Ä—É –∏–∑ —Ñ–∞–π–ª–∞ src/app/httpd.py (host/port –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω—ã–º–∏)

‚úÖ 1. GET-–∑–∞–ø—Ä–æ—Å—ã
üîπ –û–∑–≤—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç (—á–µ—Ä–µ–∑ /api/speak)
curl "http://localhost:8081/api/speak?text=–ü—Ä–∏–≤–µ—Ç%2C%20—è%20–≥–æ–≤–æ—Ä—é%20–ø–æ-—Ä—É—Å—Å–∫–∏"

üìù –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å URL-encoded: –ø—Ä–æ–±–µ–ª—ã ‚Üí %20, –∑–∞–ø—è—Ç—ã–µ ‚Üí %2C –∏ —Ç.–¥.

üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
curl "http://localhost:8081/health"
–û—Ç–≤–µ—Ç: 
{"status":"ok","service":"TTS"}

üîπ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å index.html)
curl http://localhost:8081/


‚úÖ 2. POST-–∑–∞–ø—Ä–æ—Å—ã
üîπ –§–æ—Ä–º–∞: application/x-www-form-urlencoded (/api/tts)
curl -X POST http://localhost:8081/api/tts -d "text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∫–∞–∫ —É –≤–∞—Å –¥–µ–ª–∞?"
     
-d –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–∏–ø application/x-www-form-urlencoded.


üîπ JSON: application/json (/api/tts/json)      
 curl -X POST http://localhost:8081/api/tts/json \
     -H "Content-Type: application/json" \
     -d '{"text": "–≠—Ç–æ —Ç–µ—Å—Ç –æ–∑–≤—É—á–∫–∏ —á–µ—Ä–µ–∑ JSON."}'

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ -H "Content-Type: application/json".

‚úÖ 3. –ü—Ä–∏–º–µ—Ä —Å Python (requests)
–ï—Å–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞:

import requests

BASE_URL = "http://localhost:8081"

# GET-–∑–∞–ø—Ä–æ—Å
response = requests.get(f"{BASE_URL}/api/speak", params={"text": "–ü—Ä–∏–≤–µ—Ç –æ—Ç Python!"})
print(response.json())

# POST (—Ñ–æ—Ä–º–∞)
response = requests.post(f"{BASE_URL}/api/tts", data={"text": "POST —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!"})
print(response.json())

# POST (JSON)
response = requests.post(f"{BASE_URL}/api/tts/json", json={"text": "JSON —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!"})
print(response.json())

‚úÖ 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä—ã—Ç—å:
http://localhost:8081/
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–∑–≤—É—á–∫–∏.

‚úÖ 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä—ã—Ç—å:


## Swagger (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, host/port –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω—ã–º–∏):
http://localhost:8081/docs

## ReDoc:
http://localhost:8081/redoc

---
# –°–æ–∑–¥–∞–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker build -t cyber-owl-tts .

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8081:8081 \
  -e TTS_PORT=8081 \
  -e TTS_LOG_LEVEL=info \
  --name tts-server \
  cyber-owl-tts
